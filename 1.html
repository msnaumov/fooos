<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Симулятор пенальти</title>

    <style>
        :root {
            --keeper-width: 120px; /* регулируем размер вратаря */
        }

        /* Заливка всей страницы */
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: linear-gradient(to right, #bada55, #bae8eb);
            font-family: Arial, sans-serif;
        }

        h1 {
            margin: 20px 0;
        }

        /* Красивое табло */
        .scoreboard {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .score-item {
            font-size: 24px;
            font-weight: bold;
            padding: 10px 20px;
            background: linear-gradient(45deg, #ff4b2b, #ff416c);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* Стили поля */
        .field {
            position: relative;
            width: 500px;
            height: 400px;
            margin: auto;
          
            overflow: hidden;
        }

        .gate {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: auto;
        }

        .keeper {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: var(--keeper-width);
            height: auto;
            transition: transform 0.3s ease-in-out;
        }

        .ball {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
        }

        /* Анимации полета мяча */
        @keyframes shootCenter {
            from { bottom: 20px; left: 50%; }
            to   { bottom: 300px; left: 50%; }
        }

        @keyframes shootLeft {
            from { bottom: 20px; left: 50%; }
            to   { bottom: 300px; left: 30%; }
        }

        @keyframes shootRight {
            from { bottom: 20px; left: 50%; }
            to   { bottom: 300px; left: 70%; }
        }

        .shoot-center { animation: shootCenter 0.8s linear forwards; }
        .shoot-left   { animation: shootLeft 0.8s linear forwards; }
        .shoot-right  { animation: shootRight 0.8s linear forwards; }

        /* Анимации прыжков вратаря */
        @keyframes jumpLeft {
            from { transform: translateX(-50%) translateY(0); }
            to   { transform: translateX(-150%) translateY(20px) rotate(-10deg); }
        }

        @keyframes jumpRight {
            from { transform: translateX(-50%) translateY(0); }
            to   { transform: translateX(50%) translateY(20px) rotate(10deg); }
        }

        @keyframes jumpCenter {
            from { transform: translateX(-50%) translateY(0); }
            to   { transform: translateX(-50%) translateY(20px); }
        }

        .jump-left   { animation: jumpLeft 0.8s forwards; }
        .jump-right  { animation: jumpRight 0.8s forwards; }
        .jump-center { animation: jumpCenter 0.8s forwards; }

        /* Стиль кнопки */
        button {
            margin-top: 20px;
            padding: 12px 28px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #ff4b2b, #ff416c);
            color: white;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        #result {
            margin-top: 15px;
            font-weight: bold;
            font-size: 20px;
            color: darkred;
        }
    </style>
</head>
<body>
    <h1>Симулятор пенальти</h1>

    <!-- Форма ввода данных -->
    <div style="margin-bottom: 20px;">
        <label for="playerName">Ваше имя:</label><br>
        <input type="text" id="playerName" placeholder="Иван Иванов"><br>
        <label for="phoneNumber">Номер телефона:</label><br>
        <input type="tel" id="phoneNumber" placeholder="+7 999 123-45-67"><br>
        <button onclick="startGame()">Начать игру</button>
    </div>

    <!-- Игровая область -->
    <div id="gameArea" style="display: none;">
        <div class="scoreboard">
            <span class="score-item">Гол: <span id="goalsCount">0</span></span>
            <span class="score-item">Попыток осталось: <span id="attemptsRemaining">5</span></span>
        </div>

        <div class="field">
            <img src="44.png" alt="ворота" class="gate">
            <img src="keeper_center.png" alt="вратарь" class="keeper" id="keeper">
            <img src="ball.png" alt="мяч" class="ball" id="ball">
        </div>
        <button onclick="shoot()">Удар!</button>
        <p id="result"></p>
    </div>

    <script>
        // Элементы игры
        const keeper = document.getElementById('keeper');
        const ball = document.getElementById('ball');
        const resultText = document.getElementById('result');
        const goalsDisplay = document.getElementById('goalsCount');
        const attemptsRemainingDisplay = document.getElementById('attemptsRemaining');

        // Формирование структуры игрока
        let currentPlayer = {};

        // Максимальное количество попыток
        let attemptsRemaining = 5;
        let totalGoals = 0;

        // Функционал начала игры
        function startGame() {
            const playerName = document.getElementById('playerName').value.trim();
            const phoneNumber = document.getElementById('phoneNumber').value.trim();

            if(playerName === "" || phoneNumber === "") {
                alert("Заполните все поля!");
                return;
            }

            // Сохраняем данные игрока
            currentPlayer = {
                name: playerName,
                phone: phoneNumber
            };

            // Показываем игровую область
            document.getElementById("gameArea").style.display = "block";
        }

        // Вспомогательная функция обновления табло
        function updateScoreboard() {
            goalsDisplay.textContent = totalGoals.toString();
            attemptsRemainingDisplay.textContent = attemptsRemaining.toString();
        }

        // Основной игровой цикл
        function shoot() {
            if(attemptsRemaining > 0) {
                resetPositions(); // сброс перед новым ударом
                resultText.textContent = "";

                // Случайное направление удара
                let shot = ["left", "center", "right"][Math.floor(Math.random() * 3)];

                // Случайное движение вратаря
                let keeperChoice = ["left", "center", "right"][Math.floor(Math.random() * 3)];

                // Применяем анимации
                keeper.classList.add(`jump-${keeperChoice}`);
                ball.classList.add(`shoot-${shot}`);

                setTimeout(() => {
                    // Проверка результата
                    if (shot === keeperChoice) {
                        resultText.textContent = "Отбит!";
                        resultText.style.color = "darkblue";
                    } else {
                        resultText.textContent = "ГОЛ!!!";
                        resultText.style.color = "darkred";
                        totalGoals++;
                    }

                    // Понижение оставшегося количества попыток
                    attemptsRemaining--;
                    updateScoreboard(); // обновить табло

                    // Если заканчиваются попытки, отправить результат
                    if(attemptsRemaining === 0) {
                        endGame();
                    }

                    // Вернуть всё в исходное через 1 секунду
                    setTimeout(() => {
                        resetPositions();
                    }, 1000);
                }, 800);
            } else {
                alert("Играть больше нельзя! Нажмите F5 для перезапуска.");
            }
        }

        // Сброс состояний перед каждым ударом
        function resetPositions() {
            keeper.classList.remove('jump-left', 'jump-center', 'jump-right');
            ball.classList.remove('shoot-left', 'shoot-center', 'shoot-right');
            keeper.style.transform = "translateX(-50%)";
            ball.style.bottom = "20px";
            ball.style.left = "50%";
            ball.style.transform = "translateX(-50%)";
        }

        // Завершение игры и отправка результата
        function endGame() {
            const emailAddress = "your_email@example.com"; // здесь замените на реальную почту
            const gameResults = {
                playerName: currentPlayer.name,
                score: totalGoals,
                attemptsUsed: 5 - attemptsRemaining
            };

            // Отправляем результат игры на указанную почту
            sendEmailWithResults(emailAddress, gameResults);

            alert("Игра завершилась! Результат отправлен на вашу почту.");
        }

        // Эмуляция отправки письма с результатами игры
        function sendEmailWithResults(emailAddress, results) {
            console.log(`Отправляю письмо на ${emailAddress}:`);
            console.log(results);
        }
    </script>
</body>
</html>